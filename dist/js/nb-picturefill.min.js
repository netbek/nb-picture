/*
 * nb-picturefill
 * 
 * @author Hein Bekker <hein@netbek.co.za>
 * @copyright (c) 2015 Hein Bekker
 * @license http://www.gnu.org/licenses/agpl-3.0.txt AGPLv3
 */
!function(a,b){"use strict";function c(){}function d(a){var b=a.picturefill;return delete a.picturefill,b}function e(){var a={mediaqueries:{small:"only screen and (min-width: 0px)",medium:"only screen and (min-width: 640px)",large:"only screen and (min-width: 992px)",xlarge:"only screen and (min-width: 1440px)",xxlarge:"only screen and (min-width: 1920px)",landscape:"only screen and (orientation: landscape)",portrait:"only screen and (orientation: portrait)",retina:"only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx)"}};return{set:function(c){a=b.extend({},a,c)},$get:function(){return a}}}function f(a,c,d,e){return{restrict:"A",replace:!0,template:'<picture>\n				<!--[if IE 9]><video style="display: none;"><![endif]-->\n				<source ng-repeat="source in sources" bindonce="source" bo-attr bo-attr-srcset="source.srcset" bo-attr-media="source.media" />\n				<!--[if IE 9]></video><![endif]-->\n				<img bindonce="img" bo-attr bo-attr-srcset="img.srcset" bo-attr-alt="img.alt" />\n			</picture>',link:function(f,g,h){var i=[],j=g.find("img"),k=[];if(b.isDefined(h.sources)&&(k=f.$eval(h.sources),!b.isArray(k)))throw c.t('Excepted attribute "!attribute" to evaluate to !type',{"!attribute":"nb-picturefill-sources","!type":"Array"});f.sources=[];for(var l=k.length,m=l-1;m>=0;m--){var n,o=k[m];b.isDefined(o[1])&&o[1]in d.mediaqueries&&(n=d.mediaqueries[o[1]]),f.sources.push({srcset:o[0],media:n})}f.sources.push({srcset:h["default"]}),f.img={srcset:h["default"],alt:h.alt},f.isLoaded=function(){var a=j.prop("complete"),b=j.prop("readyState");return a||"complete"==b||"loaded"==b},i.push(a(function(){e(g)})),f.$on("$destroy",function(){b.forEach(i,function(a){a()})})}}}b.module("nb.picturefill",["nb.i18n","pasvaz.bindonce"]).factory("Picturefill",d).provider("nbPicturefillConfig",e).directive("nbPicturefill",f).run(c),c.$inject=["Picturefill"],d.$inject=["$window"],f.$inject=["$timeout","I18N","nbPicturefillConfig","Picturefill"]}(window,window.angular);